<!doctype html>
<html lang="fr">

<head>
	<meta charset="utf-8" />
	<link rel="icon" href="../favicon.png" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	
		<link href="../_app/immutable/assets/0.BvxtqMAU.css" rel="stylesheet">
		<link href="../_app/immutable/assets/LangSwitch.D4CuLywu.css" rel="stylesheet">
		<link href="../_app/immutable/assets/2.4x1IaMwx.css" rel="stylesheet">
		<link href="../_app/immutable/assets/blog.D9BamZMJ.css" rel="stylesheet">
		<link href="../_app/immutable/assets/ImageLine.CAADl_rs.css" rel="stylesheet">
		<link href="../_app/immutable/assets/BlogHeader.C8YjtI31.css" rel="stylesheet">
		<link rel="modulepreload" href="../_app/immutable/entry/start.u-Wteq8y.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CLGUSjJI.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Bm71ymzX.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/NYUUSniZ.js">
		<link rel="modulepreload" href="../_app/immutable/entry/app.DcmLtfWz.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DNn2cqiw.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/KFbLBMNv.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DMdQCuBz.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Csq-aEhW.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DF1ykZbt.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BVURUfRG.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/0.BdxfaxRO.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/CiU2yvg0.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/B4TcwL9j.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/COpt4jaA.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BDchK3QZ.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DFnrMYi5.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/Byggwg6S.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/DAdGW26N.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/2.DTUUmE8X.js">
		<link rel="modulepreload" href="../_app/immutable/nodes/6.CgHEBCQj.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/D9D4Nmvy.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/BW25n9hM.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/735axTuM.js">
		<link rel="modulepreload" href="../_app/immutable/chunks/C-K7O-Rm.js"><!--[--><meta property="og:type" content="article"> <meta property="og:title" content="Transformer un escalier en un piano public"><!--]--><title>Transformer un escalier en un piano public</title>
</head>

<body data-sveltekit-preload-data="hover">
	<div style="display: contents"><!--[--><!--[--><!----><header><nav class="svelte-1rmtann"><a href="/" class="navbarlink"><div class="logo svelte-1rmtann"><svg viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" style="--size: calc(var(--m) * 0.75)" class="svelte-62wra6"><path id="J" d="M6,0L18,0C21.312,0 24,2.689 24,6C24,7.104 23.104,8 22,8L2,8C0.896,8 0,7.104 0,6C0,2.689 2.689,0 6,0ZM6,24C2.689,24 0,21.312 0,18C0,16.896 0.896,16 2,16L14,16C15.104,16 16,16.896 16,18C16,21.312 13.312,24 10,24L6,24Z"></path></svg><!----> <span>Jame FLC</span></div><!----><!----></a><!----> <div class="navbar-wrapper svelte-ep640f"><nav class="navbar svelte-ep640f"><a href="/" class="navbarlink"><div class="link-content svelte-ep640f"><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" class="svelte-1b9maai"><g transform="matrix(0.967293,0,0,0.967293,0,0)"><rect x="0" y="0" width="16.541" height="16.541" style="fill:none;"></rect><g id="Shape" transform="matrix(1,0,0,1,2.239,2.242)"><path d="M6.341,1.138C6.157,1 5.905,1 5.721,1.138L1.241,4.497C1.111,4.595 1.034,4.748 1.034,4.911L1.034,10.508C1.034,10.794 1.266,11.025 1.551,11.025L3.963,11.025L3.963,9.474C3.963,8.332 4.889,7.407 6.031,7.407C7.173,7.407 8.098,8.332 8.098,9.474L8.098,11.025L10.511,11.025C10.796,11.025 11.028,10.794 11.028,10.508L11.028,4.911C11.028,4.748 10.951,4.595 10.821,4.497L6.341,1.138ZM5.1,0.31C5.651,-0.103 6.41,-0.103 6.961,0.31L11.441,3.67C11.831,3.963 12.061,4.422 12.061,4.911L12.061,10.508C12.061,11.364 11.367,12.058 10.51,12.058L7.581,12.058C7.296,12.058 7.064,11.827 7.064,11.541L7.064,9.474C7.064,8.903 6.601,8.44 6.03,8.44C5.46,8.44 4.997,8.903 4.997,9.474L4.997,11.541C4.997,11.827 4.765,12.058 4.48,12.058L1.551,12.058C0.694,12.058 0,11.364 0,10.508L0,4.911C0,4.422 0.23,3.963 0.62,3.67L5.1,0.31Z"></path></g></g></svg><!----> <!--[!--><!---->Acceuil<!----><!--]--><!----></div><!----><!----></a><!----> <a href="/gallery" class="navbarlink"><div class="link-content svelte-ep640f"><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" class="svelte-1b9maai"><g transform="matrix(0.967293,0,0,0.967293,0,0)"><rect x="0" y="0" width="16.541" height="16.541" style="fill:none;"></rect><g id="Shape" transform="matrix(1,0,0,1,1.654,1.376)"><path d="M9.693,0.454C9.112,-0.151 8.169,-0.151 7.588,0.454L6.803,1.272C6.797,1.277 6.792,1.283 6.787,1.288C6.781,1.294 6.776,1.3 6.771,1.305L5.416,2.717C5.41,2.722 5.405,2.728 5.399,2.733C5.394,2.739 5.389,2.745 5.384,2.75L0.436,7.904C-0.145,8.51 -0.145,9.491 0.436,10.097L3.541,13.332C4.123,13.937 5.065,13.937 5.647,13.332L12.799,5.882C13.38,5.276 13.38,4.295 12.799,3.689L9.693,0.454ZM6.613,4.729L5.75,3.83L5.063,4.546L7.141,6.71C7.335,6.912 7.335,7.239 7.141,7.441C6.947,7.643 6.633,7.643 6.439,7.441L4.362,5.277L3.676,5.991L4.54,6.891C4.734,7.093 4.734,7.42 4.54,7.622C4.346,7.824 4.032,7.824 3.838,7.622L2.974,6.722L2.289,7.436L4.366,9.6C4.56,9.802 4.56,10.13 4.366,10.331C4.173,10.533 3.858,10.533 3.665,10.331L1.587,8.167L1.138,8.635C0.944,8.837 0.944,9.165 1.138,9.366L4.243,12.601C4.437,12.803 4.751,12.803 4.945,12.601L12.097,5.151C12.29,4.949 12.29,4.622 12.097,4.42L8.991,1.186C8.797,0.984 8.483,0.984 8.289,1.186L7.839,1.654L9.916,3.818C10.11,4.019 10.11,4.347 9.916,4.549C9.722,4.75 9.408,4.75 9.214,4.549L7.137,2.385L6.452,3.099L7.315,3.998C7.508,4.2 7.508,4.527 7.315,4.729C7.121,4.931 6.807,4.931 6.613,4.729Z"></path></g></g></svg><!----> <!--[!--><!---->Gallerie<!----><!--]--><!----></div><!----><!----></a><!----> <a href="/cv" class="navbarlink"><div class="link-content svelte-ep640f"><svg viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xml:space="preserve" class="svelte-1b9maai"><g transform="matrix(0.967293,0,0,0.967293,0,0)"><rect x="0" y="0" width="16.541" height="16.541" style="fill:none;"></rect><g id="Path" transform="matrix(1,0,0,1,7.236,9.682)"><path d="M4.489,0.811C4.651,0.576 4.592,0.254 4.357,0.092C4.123,-0.071 3.801,-0.012 3.638,0.223C2.954,1.215 1.811,1.863 0.517,1.863C0.231,1.863 0,2.094 0,2.379C0,2.665 0.231,2.896 0.517,2.896C2.165,2.896 3.62,2.07 4.489,0.811Z"></path></g><g id="Path1" transform="matrix(1,0,0,1,5.169,5.502)"><path d="M0.861,0C1.337,0 1.723,0.386 1.723,0.861C1.723,1.337 1.337,1.723 0.861,1.723C0.386,1.723 0,1.337 0,0.862C0,0.386 0.386,0 0.861,0Z"></path></g><g id="Path2" transform="matrix(1,0,0,1,9.648,5.502)"><path d="M1.723,0.861C1.723,0.386 1.337,0 0.861,0C0.386,0 0,0.386 0,0.861C0,1.337 0.386,1.723 0.861,1.723C1.337,1.723 1.723,1.337 1.723,0.861Z"></path></g><g id="Shape" transform="matrix(1,0,0,1,1.378,1.378)"><path d="M6.892,0C3.086,0 0,3.086 0,6.892C0,10.698 3.086,13.784 6.892,13.784C10.698,13.784 13.784,10.698 13.784,6.892C13.784,3.086 10.698,0 6.892,0ZM1.034,6.892C1.034,3.657 3.657,1.034 6.892,1.034C10.128,1.034 12.751,3.657 12.751,6.892C12.751,10.128 10.128,12.751 6.892,12.751C3.657,12.751 1.034,10.128 1.034,6.892Z"></path></g></g></svg><!----> <span>CV</span></div><!----><!----></a><!----></nav></div><!----></nav></header><!----> <!--[--><!----><div class="content-wrapper-blog"><!----><article><hgroup class="mobile-side-merge"><h1 class="title svelte-1fle0dt">Transformer un escalier en un piano public</h1> <p class="published svelte-1fle0dt"><!--[!--><!---->Publié le<!----><!--]--><!----> 2025-05-08</p> <div class="thumbnail-wrapper svelte-1fle0dt"><img class="thumbnail svelte-1fle0dt" src="/images/thumbnails/Escalarmony.webp" alt=""></div></hgroup><!----> <!----><p>Bonjour, bonjour. Aujourd’hui, je vais vous présenter le projet <strong>Escalarmonie</strong>. Il s’agit d’un projet réalisé en collaboration avec le festival <a href="https://spawngamesfestival.org/" class="" rel="nofollow"><!---->Spawn!<!----><!----></a><!----> d’Angoulême. Cet événement qui est organisé au Cnam-Enjmin est dédié au développement de la filière image en Charente.</p> <p>Pour l’occasion, mon équipe et moi avons conçu, fabriqué et mis en place une installation interactive permettant aux visiteurs du festival d’utiliser un des escaliers comme un instrument de musique.</p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/Result.webp" alt="Installation d'Escalarmonie dans le bâtiment de l'Enjmin"><figcaption>Installation d'Escalarmonie dans le bâtiment de l'Enjmin</figcaption></figure> <h1>Contexte</h1> <p>Le projet a été réalisé en plusieurs à temps partiel entre octobre 2023 et avril 2024. Nous étions 4 à avoir travaillé sur le projet.</p> <ul><li><a href="https://www.linkedin.com/in/pierre-vandel/" class="" rel="nofollow"><!---->Pierre Vandel<!----><!----></a><!----> : Gestion de projet, Gestion du Budget</li> <li><a href="https://www.linkedin.com/in/lucas-le-dudal/" class="" rel="nofollow"><!---->Lucas Le Dudal<!----><!----></a><!----> :  Recherche hardware, prototypage</li> <li><a href="https://www.linkedin.com/in/colin-bernard-75686557/" class="" rel="nofollow"><!---->Colin Bernard<!----><!----></a><!----> : Programmation Électronique</li> <li>Jame Floc’h Le Carour : Programmation Audio / UI, Modélisation 3D </li></ul> <p>L’objectif était de réaliser une installation ludique avant le lancement du festival <em>Spawn!</em> 2024. L’idée était inspirée d’un projet similaire réalisé <a href="https://www.youtube.com/watch?v=cHN6I3kV8-U" class="" rel="nofollow"><!---->dans le métro de Rennes<!----><!----></a><!---->. Le budget du projet était d’environ <strong>630 €</strong>.</p> <ul><li>440 € d’électronique</li> <li>100 € de matériel audio</li> <li>80 € de décoration</li></ul> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/StairZone.webp" alt="Zone initialement prévue pour l'installation de l'escalier"><figcaption>Zone initialement prévue pour l'installation de l'escalier</figcaption></figure> <p>À l’origine, la moitié complète de l’escalier était prévue d’être transformée en instrument. Pour rentrer dans le budget du projet, huit marches de l’escalier ont été transformées en touches de piano. Cela permettait de quand même correspondre à une gamme de touches blanches de piano et permettait également de créer des ambiances sonores relativement complexes.</p> <p><video controls><source src="/images/blog/Escalarmonie/TestEscalarmonie.mp4" type="video/mp4">Test des huit touches de clavier avant le festival Spawn!</video></p> <h1>Projet en deux parties</h1> <p>Tout comme le jeu <a href="/blog/maldirach" class=""><!---->À travers le Maldirach<!----><!----></a><!----> le projet <em>Escalarmonie</em> contient deux pôles techniques. Le premier pôle est une partie électronique contrôlée par un <em>ESP32</em>. Le second pôle est une application <em>Unity</em> qui régit un système audio avec en plus une interface utilisateur qui permet au public de contrôler les types de sons joués par l’installation.</p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/DataFlow.svg" alt="Flow d'information du système"><figcaption>Flow d'information du système</figcaption></figure> <h1>Escalier</h1> <p>Pour la conception de l’escalier, nous avons fait un état de l’art des différentes installations existantes.</p> <ul><li><a href="https://www.youtube.com/watch?v=cHN6I3kV8-U" class="" rel="nofollow"><!---->Dans le métro de Rennes<!----><!----></a><!----></li> <li><a href="https://www.youtube.com/watch?v=2lXh2n0aPyw" class="" rel="nofollow"><!---->Piano stairs - TheFunTheory.com - Rolighetsteorin.se<!----><!----></a><!----></li></ul> <figure><div class="images-wrapper svelte-c8aynl"><!--[--><div class="image-wrapper" style="--radius: var(--rm); aspect-ratio: 1.7777777777777777;"><img src="/images/blog/Escalarmonie/PianoStairsMetroRennes.webp" alt="" style="height: 100%; width: 100%" class="svelte-c8aynl"></div><div class="image-wrapper" style="--radius: var(--rm); aspect-ratio: 1.7777777777777777;"><img src="/images/blog/Escalarmonie/PianoStairsRolighetsteorin.webp" alt="" style="height: 100%; width: 100%" class="svelte-c8aynl"></div><!--]--></div> <!--[--><figcaption>Projets d'escalier piano à Rennes et par The Fun Theory</figcaption><!--]--></figure><!----> <p>Ces solutions utilisaient des capteurs de pression et demandaient beaucoup de matériel qui n’était pas à la portée du projet avec nos financements. Nous nous sommes alors tournés vers des solutions alternatives de détection de présence. </p> <p>La première option était d’utiliser des capteurs de distance <em>ultrason</em> classiques. En effectuant des tests, nous avons remarqué que leur rayon de détection était trop élevé et les capteurs avaient tendance à détecter le sol et les autres marches comme un obstacle.</p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/UltrasoundSensor.webp" alt="Capteur Ultrason testé pour le projet"><figcaption>Capteur Ultrason testé pour le projet</figcaption></figure> <p>Après d’autres recherches, nous avons choisi d’utiliser des capteurs de distance laser de type <em>time of flight</em>. Le capteur choisi permettait de détecter un obstacle sur une distance de six mètres et n’avait pas le problème d’interférence des systèmes à <em>ultrason</em>, car le cône de détection était très étroit.  </p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/AdafruitTOF.webp" alt="Capteur Adafruit VL53L4CX utilisé dans le projet"><figcaption>Capteur Adafruit VL53L4CX utilisé dans le projet</figcaption></figure> <p>Tous les détecteurs étaient contrôlés par un <em>ESP32</em> qui a été programmé par <strong>Colin Bernard</strong>. Il a également construit le boitier qui contenait le <em>microcontrôleur</em> et le <em>hub</em> des capteurs.</p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/Hub.webp" alt="Boitier électronique du projet"><figcaption>Boitier électronique du projet</figcaption></figure> <p>Pour faciliter l’installation des capteurs, j’ai modélisé des supports articulés dans <strong>Blender</strong>. Ces supports nous ont permis de pouvoir régler individuellement les capteurs pour éviter les interférences tout en protégeant les <em>PCB</em>.</p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/RotationRender.webp" alt="Rendu des articulations possibles des supports"><figcaption>Rendu des articulations possibles des supports</figcaption></figure> <figure><div class="images-wrapper svelte-c8aynl"><!--[--><div class="image-wrapper" style="--radius: var(--rm); aspect-ratio: 1.3333333333333333;"><img src="/images/blog/Escalarmonie/Sensor2.webp" alt="" style="height: 100%; width: 100%" class="svelte-c8aynl"></div><div class="image-wrapper" style="--radius: var(--rm); aspect-ratio: 1.3333333333333333;"><img src="/images/blog/Escalarmonie/Sensor1.webp" alt="" style="height: 100%; width: 100%" class="svelte-c8aynl"></div><div class="image-wrapper" style="--radius: var(--rm); aspect-ratio: 1.3333333333333333;"><img src="/images/blog/Escalarmonie/Sensor3.webp" alt="" style="height: 100%; width: 100%" class="svelte-c8aynl"></div><!--]--></div> <!--[--><figcaption>Capteurs dans différentes positions</figcaption><!--]--></figure><!----> <h1>Système numérique</h1> <p>Je me suis occupé de la programmation du système numérique du projet. Pour cela, j’ai choisi d’utiliser le moteur de jeu <em>Unity</em>.  Grâce au projet <a href="/blog/malriach" class=""><!---->Maldirach<!----><!----></a><!---->, j’avais l’expérience de contrôler un système audio via un <em>ESP32</em> avec ce moteur. De plus, le système de <em>Mastering audio</em> du moteur permet d’obtenir des effets relativement complexes sans avoir besoin de librairies audio externes. Enfin, le moteur permet de créer des interfaces utilisateurs avancées. Cela a été très utile durant le projet.</p> <h2>Communication avec l’<em>ESP32</em></h2> <p>La communication avec l’<em>ESP32</em> est assez simple. Comme pour le projet <strong>Maldirach</strong>, le premier <em>script</em> réceptionne les informations de l’<em>ESP32</em> via un <em>port serial</em> sur un <em>thread</em> en <em>background</em> et notifie les informations reçues via des <em>Events</em>. L’<em>ESP32</em> informe au système le nombre de touches disponibles et chaque touche qui est actuellement pressée.</p> <p>Ces informations sont ensuite filtrées par un second script qui empêche les interférences électriques et les problèmes des capteurs d’avoir un impact sur les sons joués par le système. Il permet également de paramétrer la distance minimum et maximum de détection d’obstacles pour pouvoir fonctionner dans plusieurs configurations. Par exemple, on peut configurer le système pour détecter les pas sur un quart, la moitié ou toute la largeur d’un escalier.</p> <div class="x-centerer"><div class="slideshow-wrapper"><div class="slide-content-wrapper centerer" style="height: 24rem;"><div class="slide-content"><div class="stair-wrapper svelte-1bnfaju"><div class="stair-step first-step svelte-1bnfaju"><div class="text svelte-1bnfaju">Distance de détection : 
					5.0 m</div></div> <!--[--><div class="stair-step svelte-1bnfaju"><div class="sensor svelte-1bnfaju"></div> <div class="lazer svelte-1bnfaju" style="width: 100%;"></div></div><div class="stair-step svelte-1bnfaju"><div class="sensor svelte-1bnfaju"></div> <div class="lazer svelte-1bnfaju" style="width: 100%;"></div></div><div class="stair-step svelte-1bnfaju"><div class="sensor svelte-1bnfaju"></div> <div class="lazer svelte-1bnfaju" style="width: 100%;"></div></div><div class="stair-step svelte-1bnfaju"><div class="sensor svelte-1bnfaju"></div> <div class="lazer svelte-1bnfaju" style="width: 100%;"></div></div><div class="stair-step svelte-1bnfaju"><div class="sensor svelte-1bnfaju"></div> <div class="lazer svelte-1bnfaju" style="width: 100%;"></div></div><div class="stair-step svelte-1bnfaju"><div class="sensor svelte-1bnfaju"></div> <div class="lazer svelte-1bnfaju" style="width: 100%;"></div></div><div class="stair-step svelte-1bnfaju"><div class="sensor svelte-1bnfaju"></div> <div class="lazer svelte-1bnfaju" style="width: 100%;"></div></div><!--]--></div><!----></div></div> <div class="slide-controls-wrapper"><input class="slide-range" type="range" value="1" min="0" max="1" step="0.01"></div></div></div><!----> <br> <br> Pour aider au prototypage, j'ai créé un script qui émule le comportement de l'_ESP32_. Celui-ci détectait les appuis sur les touches du clavier et envoyait des _events_ similaire, cela m'a permis de prototyper le système de son et d'_UI_ pendant le développement de la partie électronique. <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/ESP23Emulator.svg" alt="Contrôle des touches de clavier via un ESP32 et un script simulant des touches"><figcaption>Contrôle des touches de clavier via un ESP32 et un script simulant des touches</figcaption></figure> <h2>Gestion des playlists audio</h2> <p>Le système peut jouer plusieurs instruments et des ambiances sonores qui sont stockées dans des <code>Playlists</code>. Celles-ci sont importées au lancement du logiciel depuis un dossier proche de l’exécutable.</p> <p>Chaque playlist est un dossier qui comprend un nombre choisi  <code>n</code>  de “notes” jouables (peut être une note ou un bruit d’ambiance) et chaque note est numérotée de <code>1</code> à <code>n</code>.  </p> <p>Voici à quoi ressemble la hiérarchie des fichiers d’Escalarmonie pour un projet avec deux playlists :</p> <!---->
			<div class="blog-code-block mobile-side-merge">
				<div class="blog-code-block-content">
					<pre class="shiki github-light-default" style="background-color:#ffffff;color:#1f2328" tabindex="0"><code><span class="line"><span>.</span></span>
<span class="line"><span>├── Escalarmonie.exe</span></span>
<span class="line"><span>└── Playlists</span></span>
<span class="line"><span>    ├── Piano</span></span>
<span class="line"><span>    │   ├── 1.wav</span></span>
<span class="line"><span>    │   ├── 2.wav</span></span>
<span class="line"><span>    │   ├── 3.wav</span></span>
<span class="line"><span>    │   ├── ...</span></span>
<span class="line"><span>    │   ├── [n].wav</span></span>
<span class="line"><span>    │   ├── thumbnail.png</span></span>
<span class="line"><span>    │   └── settings.json</span></span>
<span class="line"><span>    └── Forest</span></span>
<span class="line"><span>        ├── 1.wav</span></span>
<span class="line"><span>        ├── 2.wav</span></span>
<span class="line"><span>        ├── 3.wav</span></span>
<span class="line"><span>        ├── ...</span></span>
<span class="line"><span>        ├── [n].wav</span></span>
<span class="line"><span>        ├── thumbnail.png</span></span>
<span class="line"><span>        └── settings.json</span></span></code></pre>
				</div>
				<div class="language-legend" >
					<div class="language-legend-text" aria-label="plaintext">
							txt
					</div>
				</div>
			</div><!----> <p>Les playlists contiennent également une image <code>thumbnail</code> qui est affichée dans l’interface du logiciel. Enfin, les paramètres de la playlist sont stockés dans un fichier <code>settings.json</code>. Il contient plusieurs paramètres qui permettent de modifier le comportement et le son des touches :</p> <!---->
			<div class="blog-code-block mobile-side-merge">
				<div class="blog-code-block-content">
					<pre class="shiki github-light-default" style="background-color:#ffffff;color:#1f2328" tabindex="0"><code><span class="line"><span style="color:#1F2328">&#123;</span></span>
<span class="line"><span style="color:#116329">	"AttackDuration"</span><span style="color:#1F2328">: </span><span style="color:#0550AE">1</span><span style="color:#1F2328">, </span><span style="color:#6E7781">// ..... Durée fade in</span></span>
<span class="line"><span style="color:#116329">	"ReleaseDuration"</span><span style="color:#1F2328">: </span><span style="color:#0550AE">2</span><span style="color:#1F2328">, </span><span style="color:#6E7781">// .... Durée fade out</span></span>
<span class="line"><span style="color:#116329">	"AudioIsLooping"</span><span style="color:#1F2328">: </span><span style="color:#0550AE">true</span><span style="color:#1F2328">, </span><span style="color:#6E7781">// .. Boucle audio si la touche reste appuyée</span></span>
<span class="line"><span style="color:#116329">	"HighpassCutoff"</span><span style="color:#1F2328">: </span><span style="color:#0550AE">22000.0</span><span style="color:#1F2328">, </span><span style="color:#6E7781">// Filtrage hautes fréquences</span></span>
<span class="line"><span style="color:#116329">	"LowpassCutoff"</span><span style="color:#1F2328">: </span><span style="color:#0550AE">10.0</span><span style="color:#1F2328">, </span><span style="color:#6E7781">// ... Filtrage basses fréquences</span></span>
<span class="line"><span style="color:#116329">	"Distortion"</span><span style="color:#1F2328">: </span><span style="color:#0550AE">0.0</span><span style="color:#6E7781"> // ........ Distortion audio</span></span>
<span class="line"><span style="color:#1F2328">&#125;</span></span></code></pre>
				</div>
				<div class="language-legend" >
					<div class="language-legend-text" aria-label="JSON">
							JSON
					</div>
				</div>
			</div><!----> <p>Par exemple, <code>AudioIsLooping</code> est principalement utilisée pour les ambiances sonores qui se répètent dans le temps.</p> <p><code>AttackDuration</code>, <code>RealeaseDuration</code> et <code>IsAudioLooping</code> contrôlent les sources sonores individuellement, tandis que <code>HighpassCutoff</code>, <code>LowpassCurtoff</code> et <code>Distortion</code> influent sur le système de <em>mixage audio</em> d’<em>Unity</em>.</p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/Mixer.webp" alt="Effet de filtrage audio dans un mixeur Unity"><figcaption>Effet de filtrage audio dans un mixeur Unity</figcaption></figure> <p>Tous ces effets permettent de créer des ambiances sonores complexes et d’effectuer des modifications sur les pistes audio sans devoir réexporter les samples audio.</p> <p><video controls><source src="/images/blog/Escalarmonie/MultpleInstruments.mp4" type="video/mp4">Test effectué avec plusieurs instruments</video></p> <p><video controls><source src="/images/blog/Escalarmonie/ForestSounds.mp4" type="video/mp4">Ambiance sonore de forêt dans</video></p> <h2>Interface Utilisateur</h2> <p>J’ai conçu l’interface utilisateur dans le but de donner envie aux visiteurs de changer les <em>playlists</em> de son. L’objectif était donc d’avoir une interface simple et accueillante pour des personnes novices. Un second objectif était d’afficher des informations sur le fonctionnement de l’installation dans un but de vérification / <em>debug</em>.</p> <p>J’ai donc séparé l’interface en deux sections :</p> <ul><li>Section supérieure (principale) de sélection de <em>playlists</em></li> <li>Section inférieure (secondaire) d’affichage d’informations</li></ul> <figure class="svelte-y21m64"><div class="images-wrapper rounded-image svelte-y21m64"><img src="/images/blog/Escalarmonie/GreenStyle.webp" alt="Interface verte" class="svelte-y21m64"> <img src="/images/blog/Escalarmonie/OrangeStyle.webp" alt="Interface orange" class="fade svelte-y21m64"></div> <figcaption class="svelte-y21m64">Interface du projet changeant de couleurs en fonction de la playlist sélectionné</figcaption></figure><!----> <p>La section principale peut être utilisée sur un écran tactile et permet de changer les playlists instantanément. La section secondaire, quant à elle, contient des informations de connexions ainsi qu’un affichage des touches actuellement détectées et préssée.</p> <p>Pour donner vie à l’application, j’ai ajouté le fait qu’elle prenne pour thème la couleur de la <em>playlist</em> sélectionnée. Quand la <em>playlist</em> jouée change, les couleurs d’accentuations et le gradient de fond changent également de couleur. J’ai utilisé la librairie <a href="https://github.com/chiutse/ColorThief" class="" rel="nofollow"><!---->ColorThief for Unity<!----><!----></a><!----> pour récupérer la couleur principale des <em>miniatures</em> des <em>playlists</em>. J’ai ensuite utilisé cette couleur pour changer la teinte globale des éléments de l’application.</p> <p>Exemple de changement de teinte de l’interface en fonction d’une valeur de teinte :</p> <div class="x-centerer"><div class="slideshow-wrapper"><div class="slide-content-wrapper centerer" style="height: 24rem;"><div class="slide-content"><img src="/images/blog/Escalarmonie/UI_Style.webp" class="rounded-image" style="width: 90%; filter: hue-rotate(0deg)" alt=""><!----></div></div> <div class="slide-controls-wrapper"><input class="slide-range" type="range" value="0" min="0" max="1" step="0.01"></div></div></div><!----> <p> J’ai utilisé plusieurs <em>ShaderGraphs</em> pour modifier les couleurs des interfaces et des images. Ils m’ont permis de les changer dynamiquement et de filtrer les images. Le projet utilise <em>URP</em> comme <em>backend</em> de rendu. Concernant les animations, j’ai utilisé la librairie <a href="https://dotween.demigiant.com/" class="" rel="nofollow"><!---->DoTween<!----><!----></a><!----> qui m’a permis d’animer les changements d’état des interfaces, comme les changements de couleurs d’accentuation ou l’état des éléments d’interface.</p> <figure class="mobile-side-merge"><img src="/images/blog/Escalarmonie/ShaderGraph.webp" alt="Shadergraph contrôlant l'apparence des miniatures des playlists"><figcaption>Shadergraph contrôlant l'apparence des miniatures des playlists</figcaption></figure> <p>L’interface du logiciel est très dynamique, elle peut afficher un nombre de <em>playlists</em> et de touches disponibles variable. L’affichage et la gestion des états de l’application sont dirigés par quelques <em>scripts managers</em> qui contrôlent la communication entre l’interface utilisateur et l’état interne du système audio.</p> <div class="x-centerer"><div class="slideshow-wrapper"><div class="slide-content-wrapper centerer" style="height: 12rem;"><div class="slide-content"><div class="key-wrapper svelte-fvw508"><!--[--><div class="key svelte-fvw508">1</div><div class="key svelte-fvw508">2</div><div class="key svelte-fvw508">3</div><div class="key svelte-fvw508">4</div><div class="key svelte-fvw508">5</div><!--]--></div><!----></div></div> <div class="slide-controls-wrapper"><input class="slide-range" type="range" value="0.5" min="0" max="1" step="0.01"></div></div></div><!----> <h1>Festival Spawn!</h1> <p>L’installation a été faite dans le bâtiment de l’Enjmin pour le festival <strong>Spawn!</strong>. Elle est restée installée toute la durée du festival et a fonctionné comme prévu. Nous avons été très agréablement surpris de l’engouement du public pour l’installation et des utilisations créatives qui en ont été faites.</p> <p><video controls><source src="/images/blog/Escalarmonie/DemoSpawn.mp4" type="video/mp4">Installation d'Escalarmonie durant le festival Spawn!</video></p> <p>Le projet a été très intéressant d’un point de vue technique comme de gestion de projet. Les questions de budget nous ont conduits à trouver des solutions alternatives pour nos problématiques comme la détection de présences et la gestion audio. Le code source du projet est disponible sur <a href="https://github.com/Escalharmonie" class="" rel="nofollow"><!---->Github<!----><!----></a><!---->.</p> <p>Ce projet n’aurait pas pu être réalisé sans le soutien financier de l’<strong>Enjmin</strong> et du festival <strong>Spawn!</strong> et nous en sommes très reconnaissants.</p><!----><!----></article><!----><!----> <footer><a href="https://brainmade.org" target="_blank" aria-label="Lien externe vers brainmade.org"><svg viewBox="0 0 256 80" fill="none" xmlns="http://www.w3.org/2000/svg" class="brainmade svelte-41cb6x"><g clip-path="url(#clip0_4_2)"><path d="M52.612 78.7824H23.33C21.9166 78.7824 20.7709 77.6368 20.7709 76.2235V68.5467H12.7969C11.3836 68.5467 10.2378 67.401 10.2378 65.9877V55.3135L1.41666 50.9172C0.0382205 50.2291 -0.424107 48.488 0.431411 47.2068L10.2378 32.4928V28.1426C10.2412 12.599 22.8433 0.000244141 38.3878 0.000244141C53.9322 0.000244141 66.5344 12.599 66.5377 28.1426C65.9063 55.9671 55.7774 51.6594 55.3571 62.1884L55.1711 76.2235C55.1617 76.9301 54.8846 77.5699 54.4215 78.0329C53.9584 78.496 53.3187 78.7824 52.612 78.7824ZM25.8891 73.6645H50.0529L50.3386 59.1231C50.0761 52.467 62.0549 50.8795 61.4196 28.3885C61.0605 15.6763 51.1058 5.11757 38.3878 5.11757C25.6698 5.11757 15.359 15.4253 15.356 28.1426V33.2605C15.3552 33.7658 15.2057 34.2598 14.9261 34.6807L6.29684 47.6213L13.9408 51.4418C14.8085 51.8754 15.3565 52.7622 15.356 53.7321V63.4288H23.33C24.7433 63.4288 25.8891 64.5744 25.8891 65.9877V73.6645Z" fill="black"></path><path d="M40.3721 58.2219V38.9335C40.4904 38.9335 40.6087 38.9524 40.727 38.9524C50.4958 38.9397 57.7768 29.9404 55.7494 20.3848C55.555 19.4713 54.8413 18.7576 53.9278 18.5633C45.8216 16.8321 37.8066 21.8546 35.8299 29.904C35.8064 29.8804 35.7873 29.8543 35.7637 29.8306C32.09 26.1425 26.7949 24.5718 21.7042 25.6601C20.7906 25.8544 20.0769 26.5681 19.8826 27.4816C17.8553 37.0362 25.1347 46.0349 34.9026 46.0492C35.1392 46.0492 35.3947 46.0208 35.6407 46.009V58.2219H40.3721ZM43.211 26.0788C45.3532 23.9341 48.3082 22.8043 51.3349 22.9728C51.6841 29.3127 46.4475 34.5501 40.1072 34.2023C39.9298 31.1748 41.06 28.2168 43.211 26.0788ZM27.4032 38.1931C25.2499 36.0557 24.1149 33.0987 24.2852 30.0696C30.6292 29.7121 35.8718 34.9555 35.5129 41.2991C32.4895 41.4687 29.5401 40.3385 27.4032 38.1931Z" fill="black"></path><path d="M104.235 24.6122C104.235 27.7406 103.191 30.1603 101.102 31.8712C99.0136 33.5821 96.1129 34.4375 92.4 34.4375H77.0625V0H91.0947C94.8366 0 97.6648 0.733233 99.5792 2.1997C101.508 3.64987 102.473 5.80069 102.473 8.65215C102.473 10.6074 101.987 12.2613 101.015 13.6137C100.058 14.9498 98.593 15.8541 96.6205 16.3267C99.1006 16.6525 100.986 17.5324 102.277 18.9663C103.582 20.3839 104.235 22.2658 104.235 24.6122ZM96.0114 9.62979C96.0114 8.08185 95.569 6.98201 94.6843 6.33024C93.8141 5.67848 92.516 5.3526 90.7901 5.3526H83.4803V13.8825H90.8336C92.6466 13.8825 93.9591 13.5322 94.7713 12.8316C95.598 12.1146 96.0114 11.0474 96.0114 9.62979ZM97.7953 24.05C97.7953 20.8238 95.7358 19.2107 91.6168 19.2107H83.4803V29.0849H91.8561C93.9156 29.0849 95.4167 28.6694 96.3595 27.8384C97.3167 26.9911 97.7953 25.7283 97.7953 24.05Z" fill="black"></path><path d="M130.319 34.4375L123.206 21.3615H115.678V34.4375H109.26V0H124.576C128.231 0 131.052 0.888026 133.039 2.66408C135.026 4.42384 136.019 6.95756 136.019 10.2653C136.019 12.6768 135.41 14.7624 134.192 16.5222C132.974 18.2656 131.327 19.4144 129.253 19.9684L137.542 34.4375H130.319ZM129.558 10.5586C129.558 7.25086 127.673 5.59701 123.902 5.59701H115.678V15.7645H124.076C125.874 15.7645 127.237 15.3083 128.166 14.3958C129.094 13.4833 129.558 12.2043 129.558 10.5586Z" fill="black"></path><path d="M163.127 34.4375L160.407 25.6387H148.724L146.005 34.4375H139.587L150.769 0H158.34L169.479 34.4375H163.127ZM154.555 5.30372L154.424 5.84142C154.279 6.42801 154.105 7.09606 153.902 7.84559C153.699 8.59512 152.452 12.7175 150.16 20.2128H158.971L155.947 10.3141L155.012 6.99015L154.555 5.30372Z" fill="black"></path><path d="M173.656 34.4375V0H180.074V34.4375H173.656Z" fill="black"></path><path d="M204.723 34.4375L191.365 7.91891C191.626 10.4934 191.756 12.5627 191.756 14.127V34.4375H186.057V0H193.388L206.942 26.7386C206.681 24.2782 206.55 22.0377 206.55 20.0173V0H212.25V34.4375H204.723Z" fill="black"></path><path d="M105.259 78.75V58.0667C105.259 57.5985 105.259 57.1302 105.259 56.662C105.274 56.1938 105.351 54.1836 105.489 50.6314C104.399 54.9747 103.593 58.0021 103.071 59.7136L97.2209 78.75H92.3844L86.5346 59.7136L84.0702 50.6314C84.2545 54.3773 84.3466 56.8557 84.3466 58.0667V78.75H78.3125V44.625H87.4097L93.2136 63.7098L93.7202 65.5505L94.8257 70.1279L96.2767 64.6544L102.242 44.625H111.293V78.75H105.259Z" fill="black"></path><path d="M140.542 78.75L137.663 70.031H125.296L122.417 78.75H115.623L127.461 44.625H135.475L147.267 78.75H140.542ZM131.468 49.8806L131.33 50.4134C131.176 50.9947 130.992 51.6567 130.777 52.3994C130.562 53.1421 129.242 57.2271 126.816 64.6544H136.143L132.942 54.8455L131.952 51.5517L131.468 49.8806Z" fill="black"></path><path d="M180.616 61.4332C180.616 64.9531 179.956 68.0289 178.636 70.6608C177.33 73.2764 175.473 75.2786 173.062 76.6671C170.667 78.0557 167.918 78.75 164.817 78.75H151.689V44.625H163.435C168.901 44.625 173.131 46.0782 176.125 48.9845C179.119 51.8746 180.616 56.0242 180.616 61.4332ZM173.776 61.4332C173.776 57.768 172.87 54.9747 171.058 53.0533C169.247 51.1158 166.659 50.147 163.297 50.147H158.483V73.228H164.241C167.158 73.228 169.477 72.1704 171.197 70.0553C172.916 67.9401 173.776 65.0661 173.776 61.4332Z" fill="black"></path><path d="M185.775 78.75V44.625H211.293V50.147H192.569V58.7206H209.889V64.2426H192.569V73.228H212.238V78.75H185.775Z" fill="black"></path><path d="M217.282 78.75V71.3631H223.937V78.75H217.282Z" fill="black"></path><path d="M242.168 54.4524C244.943 54.4524 247.384 54.9731 249.491 56.0144C251.597 57.0557 253.212 58.5458 254.335 60.4847C255.445 62.4237 256 64.6858 256 67.2711C256 71.2448 254.77 74.3627 252.31 76.6248C249.838 78.8749 246.457 80 242.168 80C237.891 80 234.555 78.8749 232.158 76.6248C229.761 74.3746 228.562 71.2448 228.562 67.2352C228.562 63.2256 229.774 60.0957 232.196 57.8456C234.618 55.5835 237.942 54.4524 242.168 54.4524ZM242.168 59.8564C239.292 59.8564 237.04 60.5027 235.412 61.7953C233.772 63.088 232.952 64.9013 232.952 67.2352C232.952 69.605 233.766 71.4363 235.393 72.7289C237.008 74.0215 239.266 74.6679 242.168 74.6679C245.094 74.6679 247.403 74.0096 249.093 72.693C250.771 71.3645 251.61 69.5572 251.61 67.2711C251.61 64.9013 250.79 63.076 249.15 61.7953C247.51 60.5027 245.183 59.8564 242.168 59.8564Z" fill="black"></path><path d="M255.622 33.0521L245.498 38.9228V45.1347H255.622V50.4309H228.96V37.7917C228.96 34.7756 229.647 32.4476 231.022 30.8079C232.385 29.1682 234.346 28.3483 236.907 28.3483C238.774 28.3483 240.389 28.851 241.751 29.8564C243.101 30.8618 243.991 32.2202 244.419 33.9318L255.622 27.0916V33.0521ZM237.134 33.6804C234.574 33.6804 233.293 35.2364 233.293 38.3483V45.1347H241.165V38.2047C241.165 36.7205 240.812 35.5955 240.105 34.8294C239.399 34.0634 238.408 33.6804 237.134 33.6804Z" fill="black"></path><path d="M251.629 11.8492C251.629 10.4728 251.421 9.13824 251.004 7.8456C250.576 6.55296 250.033 5.55356 249.377 4.8474H245.687V11.0233H241.562V0H251.364C252.815 1.34051 253.95 3.08797 254.77 5.24237C255.59 7.3848 256 9.63495 256 11.9928C256 16.1101 254.802 19.2759 252.405 21.4901C249.995 23.7044 246.583 24.8115 242.168 24.8115C237.778 24.8115 234.416 23.6984 232.082 21.4722C229.736 19.246 228.562 16.0443 228.562 11.8671C228.562 5.93058 230.877 2.1544 235.507 0.5386L237.059 5.4219C235.709 5.94853 234.687 6.77439 233.993 7.89946C233.299 9.02454 232.952 10.3471 232.952 11.8671C232.952 14.3567 233.747 16.2478 235.337 17.5404C236.926 18.833 239.203 19.4794 242.168 19.4794C245.183 19.4794 247.516 18.8151 249.169 17.4865C250.809 16.146 251.629 14.2669 251.629 11.8492Z" fill="black"></path></g><defs><clipPath id="clip0_4_2"><rect width="256" height="80" fill="white"></rect></clipPath></defs></svg></a></footer></div><!----><!--]--><!----><!----><!--]--> <!--[!--><!--]--><!--]-->
			
			<script>
				{
					__sveltekit_bhvx82 = {
						base: new URL("..", location).pathname.slice(0, -1)
					};

					const element = document.currentScript.parentElement;

					Promise.all([
						import("../_app/immutable/entry/start.u-Wteq8y.js"),
						import("../_app/immutable/entry/app.DcmLtfWz.js")
					]).then(([kit, app]) => {
						kit.start(app, element, {
							node_ids: [0, 2, 6],
							data: [{type:"data",data:null,uses:{}},null,null],
							form: null,
							error: null
						});
					});
				}
			</script>
		</div>
</body>

</html>